<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Otaku Beads | Premium Art</title>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0..1,0" rel="stylesheet">
    
    <style id="m3-tokens">
        :root {
            --md-sys-color-primary: #6750A4;
            --md-sys-color-on-primary: #FFFFFF;
            --md-sys-color-surface: #FEF7FF;
            --md-sys-color-surface-container: #F3EDF7;
            --md-sys-color-secondary-container: #E8DEF8;
            --md-sys-color-error: #B3261E;
            --spring-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
            --spring-smooth: cubic-bezier(0.2, 0, 0, 1);
        }
    </style>
    
    <style>
        * { -webkit-tap-highlight-color: transparent; box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Google Sans', sans-serif; background: var(--md-sys-color-surface); color: #1D1B20; overflow-x: hidden; }
        .app-container { max-width: 1400px; margin: 0 auto; position: relative; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes pulse { 0% { scale: 1; } 50% { scale: 1.05; } 100% { scale: 1; } }
        .header { padding: 16px 24px; display: flex; align-items: center; justify-content: space-between; position: sticky; top: 0; background: rgba(254, 247, 255, 0.8); backdrop-filter: blur(12px); z-index: 1000; }
    </style>

    <style>
        .icon-btn {
            width: 48px; height: 48px; border-radius: 16px;
            background: var(--md-sys-color-surface-container); border: none;
            display: flex; align-items: center; justify-content: center;
            transition: all 0.4s var(--spring-bounce); color: var(--md-sys-color-primary); cursor: pointer;
        }
        .icon-btn:active { scale: 0.8; border-radius: 24px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 20px; padding: 24px; padding-bottom: 140px; }
        @media (min-width: 768px) { .grid { grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); } }
        .card { 
            background: var(--md-sys-color-surface-container); border-radius: 32px; padding: 16px; 
            text-align: center; opacity: 0; animation: slideUp 0.6s var(--spring-bounce) forwards;
            transition: transform 0.3s var(--spring-bounce); border: 1px solid transparent;
        }
        .card:hover { transform: translateY(-8px); border-color: var(--md-sys-color-secondary-container); }
        .card img { width: 100%; aspect-ratio: 1/1; border-radius: 24px; object-fit: cover; margin-bottom: 12px; }
        .btn-m3 { border-radius: 20px; border: none; font-weight: 700; cursor: pointer; transition: all 0.4s var(--spring-bounce); display: flex; align-items: center; justify-content: center; gap: 8px; }
        .btn-m3:active { scale: 0.94; }
    </style>

    <style>
        #scrim { position: fixed; inset: 0; background: rgba(0,0,0,0.3); z-index: 4500; opacity: 0; pointer-events: none; backdrop-filter: blur(8px); transition: 0.4s; }
        #scrim.active { opacity: 1; pointer-events: auto; }
        .drawer { position: fixed; top: 0; left: 0; width: 320px; height: 100%; background: var(--md-sys-color-surface); z-index: 6000; transform: translateX(-100%); transition: transform 0.5s var(--spring-smooth); padding: 24px; border-radius: 0 28px 28px 0; box-shadow: 10px 0 40px rgba(0,0,0,0.05); }
        .drawer.active { transform: translateX(0); }
        .sheet { position: fixed; inset: 0; z-index: 5000; transform: translateY(100%); background: var(--md-sys-color-surface-container); border-radius: 32px 32px 0 0; transition: transform 0.5s var(--spring-smooth); display: flex; flex-direction: column; overflow: hidden; }
        .sheet.active { transform: translateY(0); }
        @media (min-width: 768px) {
            .sheet { inset: auto; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.9); width: 500px; height: 85vh; border-radius: 32px; opacity: 0; pointer-events: none; }
            .sheet.active { transform: translate(-50%, -50%) scale(1); opacity: 1; pointer-events: auto; }
        }
        .ship-opt { flex: 1; text-align: center; padding: 12px 4px; border-radius: 100px; cursor: pointer; font-size: 11px; font-weight: 700; transition: 0.3s; line-height: 1.2; }
        .ship-opt.active { background: var(--md-sys-color-primary); color: white; }
    </style>
</head>
<body>
    <div id="scrim" onclick="UI.handleScrimClick()"></div>

    <div class="app-container">
        <header class="header">
            <button class="icon-btn" onclick="UI.toggle('menu', true)"><span class="material-symbols-rounded">menu_open</span></button>
            <img src="Logo.jpg" style="width:50px; height:50px; border-radius:14px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);" onerror="this.src='https://placehold.co/50'">
            <button class="icon-btn" onclick="UI.toggle('review', true)"><span class="material-symbols-rounded">rate_review</span></button>
        </header>

        <main class="grid" id="main-grid"></main>

        <nav id="menu-drawer" class="drawer">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:40px;">
                <h2 style="font-weight:700; color:var(--md-sys-color-primary);">Otaku Beads</h2>
                <button class="icon-btn" style="background:none;" onclick="UI.toggle('menu', false)"><span class="material-symbols-rounded">close</span></button>
            </div>
            <div style="display:flex; flex-direction:column; gap:12px;">
                <div onclick="window.open('https://wa.me/27XXXXXXXXX')" style="padding:18px; background:white; border-radius:20px; font-weight:700; display:flex; gap:12px; cursor:pointer; animation: pulse 2s infinite;"><span class="material-symbols-rounded">chat</span> WhatsApp Us</div>
                <div onclick="window.open('https://www.paxi.co.za/tracking')" style="padding:18px; background:white; border-radius:20px; font-weight:700; display:flex; gap:12px; cursor:pointer;"><span class="material-symbols-rounded">local_shipping</span> Track PAXI</div>
            </div>
        </nav>

        <div id="bag-sheet" class="sheet">
            <div style="padding: 24px; display:flex; justify-content:space-between; align-items:center;">
                <h2 style="font-weight:700;">Checkout</h2>
                <button onclick="UI.toggle('bag', false)" class="icon-btn"><span class="material-symbols-rounded">close</span></button>
            </div>
            <div style="padding: 0 24px 16px;">
                <div style="display:flex; background:white; padding:6px; border-radius:100px; border:1px solid #eee;">
                    <div id="s-pick" class="ship-opt" onclick="CORE.setShip('Pick-up', 0)">Pick-up<br>Free</div>
                    <div id="s-std" class="ship-opt active" onclick="CORE.setShip('PAXI Standard', 60)">PAXI Std<br>R60</div>
                    <div id="s-exp" class="ship-opt" onclick="CORE.setShip('PAXI Express', 100)">PAXI Exp<br>R100</div>
                </div>
            </div>
            <div id="bag-items" style="flex:1; overflow-y:auto; padding:0 24px;"></div>
            <div style="padding:24px; background:white; border-radius:32px;">
                <div style="display:flex; justify-content:space-between; margin-bottom:16px; font-size:24px; font-weight:700;">
                    <span>Total</span><span id="bag-total">R 0.00</span>
                </div>
                <button class="btn-m3" style="width:100%; height:72px; background:var(--md-sys-color-primary); color:white; font-size:18px;" onclick="CORE.checkout()">Order on WhatsApp</button>
            </div>
        </div>

        <div id="review-sheet" class="sheet">
            <div style="padding: 24px; display:flex; justify-content:space-between; align-items:center;">
                <h2 style="font-weight:700;">Feedback</h2>
                <button onclick="UI.toggle('review', false)" class="icon-btn"><span class="material-symbols-rounded">close</span></button>
            </div>
            <div style="padding:0 24px 40px;">
                <textarea id="rev-txt" style="width:100%; border-radius:24px; padding:20px; border:none; background:white; font-family:inherit; font-size:16px;" rows="6" placeholder="How was your order?"></textarea>
                <button class="btn-m3" style="width:100%; height:64px; margin-top:20px; background:var(--md-sys-color-primary); color:white;" onclick="UI.done()">Submit Review</button>
            </div>
        </div>

        <button id="fab-bag" class="btn-m3" style="position:fixed; bottom:24px; left:50%; transform:translateX(-50%); width:90%; max-width:440px; height:72px; background:var(--md-sys-color-primary); color:white; z-index:1001; box-shadow:0 12px 32px rgba(103,80,164,0.4);" onclick="UI.toggle('bag', true)">
            <span class="material-symbols-rounded">shopping_bag</span> View Bag 
            <div id="badge" style="display:none; background:white; color:var(--md-sys-color-primary); min-width:26px; height:26px; border-radius:13px; font-size:14px; margin-left:12px; align-items:center; justify-content:center; font-weight:700;">0</div>
        </button>
    </div>

    <script>
        const CORE = {
            cart: [], ship: 'PAXI Standard', cost: 60,
            add(id) { this.cart.push(id); this.upd(); },
            setShip(t, c) { this.ship = t; this.cost = c; this.upd(); },
            upd() {
                const b = document.getElementById('badge');
                b.innerText = this.cart.length; b.style.display = this.cart.length ? 'flex' : 'none';
                ['s-pick', 's-std', 's-exp'].forEach(id => document.getElementById(id).classList.remove('active'));
                const activeId = this.ship === 'Pick-up' ? 's-pick' : (this.ship === 'PAXI Standard' ? 's-std' : 's-exp');
                document.getElementById(activeId).classList.add('active');
                let total = this.cart.length ? (this.cart.length * 45) + this.cost : 0;
                document.getElementById('bag-total').innerText = `R ${total}.00`;
                this.render();
            },
            render() {
                const list = document.getElementById('bag-items');
                if(!this.cart.length) { list.innerHTML = '<p style="text-align:center; padding:40px; opacity:0.5;">Bag is empty</p>'; return; }
                list.innerHTML = this.cart.map((id, i) => `<div style="background:white; padding:16px; border-radius:20px; margin-bottom:12px; display:flex; justify-content:space-between; align-items:center; border:1px solid #f0f0f0;"><span>Design #${id}</span><button onclick="CORE.cart.splice(${i},1);CORE.upd()" style="background:none; border:none; color:var(--md-sys-color-error); cursor:pointer;"><span class="material-symbols-rounded">delete</span></button></div>`).join('');
            },
            checkout() { 
                if(!this.cart.length) return;
                window.open(`https://wa.me/27XXXXXXXXX?text=Order:${this.cart.join(',')}%0ADelivery:${this.ship}%0ATotal:${document.getElementById('bag-total').innerText}`); 
            }
        };

        const UI = {
            toggle(id, s) {
                const el = document.getElementById(id + (id==='menu'?'-drawer':'-sheet'));
                el.classList.toggle('active', s);
                this.updateScrim();
            },
            updateScrim() {
                const openOverlays = document.querySelectorAll('.drawer.active, .sheet.active').length;
                document.getElementById('scrim').classList.toggle('active', openOverlays > 0);
            },
            handleScrimClick() {
                // Closes top-most layer only
                if(document.getElementById('menu-drawer').classList.contains('active')) this.toggle('menu', false);
                else if(document.getElementById('bag-sheet').classList.contains('active')) this.toggle('bag', false);
                else if(document.getElementById('review-sheet').classList.contains('active')) this.toggle('review', false);
            },
            done() { alert("Review received! Thank you."); this.toggle('review', false); }
        };
    </script>

    <script>
        function init() {
            const grid = document.getElementById('main-grid');
            for(let i=1; i<=28; i++) {
                const is26 = i === 26;
                grid.innerHTML += `<div class="card" style="animation-delay: ${i*0.04}s; ${is26 ? 'opacity:0.5; filter:grayscale(1);' : ''}">
                    <img src="${i}.jpg" onerror="this.src='Logo.jpg'">
                    <div style="font-weight:700; margin:14px 0;">Design #${i}</div>
                    <button class="btn-m3" style="width:100%; height:48px; background:${is26?'#ccc':'var(--md-sys-color-primary)'}; color:white;" onclick="CORE.add(${i})" ${is26?'disabled':''}>${is26?'Coming Soon':'Add to Bag'}</button>
                </div>`;
            }
        }
        init();
    </script>

    </body>
</html>
