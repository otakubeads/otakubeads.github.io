<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Otaku Beads | Promo Updates</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">
    <style>
        :root {
            --p: #6750A4; --on-p: #ffffff; --s: #FEF7FF; --sc: #F3EDF7; --sec-c: #E8DEF8; --on-sec-c: #1D192B; --out: #CAC4D0; --err: #B3261E;
        }

        * { -webkit-tap-highlight-color: transparent; outline: none; box-sizing: border-box; }
        body { font-family: 'Roboto', sans-serif; margin: 0; background: var(--s); color: #1C1B1F; overflow-x: hidden; }

        /* M3 FLOATING TIMER */
        .timer-container {
            position: sticky; top: 12px; z-index: 200;
            display: flex; justify-content: center;
            width: 100%; pointer-events: none; margin-bottom: -40px;
        }
        .timer-pill {
            background: var(--p); color: white;
            padding: 8px 20px; border-radius: 20px;
            font-size: 13px; font-weight: 900;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: flex; align-items: center; gap: 8px;
            pointer-events: auto; transition: 0.5s ease;
        }
        .urgent { background: var(--err) !important; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        /* HEADER */
        .header { display: flex; align-items: center; gap: 10px; height: 64px; padding: 0 16px; background: var(--s); z-index: 100; margin-top: 50px; }
        .logo-img { height: 40px; width: 40px; border-radius: 50%; object-fit: cover; }
        .brand-name { font-weight: 900; font-size: 18px; color: var(--p); }

        /* GRID */
        .grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; padding: 16px; padding-bottom: 120px; }
        .card { background: var(--sc); border-radius: 28px; padding: 12px; position: relative; display: flex; flex-direction: column; justify-content: space-between; min-height: 200px; }
        .card img { width: 100%; border-radius: 22px; aspect-ratio: 1/1; object-fit: cover; }
        
        /* BUTTONS */
        .btn { height: 48px; border-radius: 24px; border: none; font-weight: 700; background: var(--p); color: white; margin-top: 12px; width: 100%; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .disabled-btn { background: #E0E0E0 !important; color: #757575 !important; cursor: not-allowed !important; opacity: 0.7; }
        
        .placeholder-text { flex: 1; display: flex; align-items: center; justify-content: center; text-align: center; font-weight: 700; color: var(--out); padding: 20px; }

        /* FAB */
        .fab { position: fixed; bottom: 24px; right: 24px; background: var(--p) !important; color: white !important; padding: 16px 24px; border-radius: 20px; border: none; display: flex; align-items: center; gap: 12px; box-shadow: 0 8px 24px rgba(0,0,0,0.3); font-weight: 900; z-index: 500; }
    </style>
</head>
<body>

    <div class="timer-container" id="timer-box">
        <div id="timer-pill" class="timer-pill">
            <span class="material-symbols-outlined" style="font-size:18px;">alarm</span>
            <span id="timer-text">LOADING...</span>
        </div>
    </div>

    <header class="header">
        <button style="background:none; border:none;"><span class="material-symbols-outlined">menu</span></button>
        <img src="logo.jpg" class="logo-img" alt="Logo">
        <span class="brand-name">Otaku Beads</span>
    </header>

    <button class="fab" onclick="toggleBag()">
        <span class="material-symbols-outlined">shopping_bag</span>
        Bag (<span id="fab-count">0</span>)
    </button>

    <main class="grid" id="main-grid"></main>

    <script>
        const deadline = new Date("Jan 31, 2026 23:59:59").getTime();
        let cart = JSON.parse(localStorage.getItem('otaku_cart')) || [];

        function updateTimer() {
            const now = new Date().getTime();
            const diff = deadline - now;
            const pill = document.getElementById('timer-pill');
            const text = document.getElementById('timer-text');

            if (diff <= 0) {
                document.getElementById('timer-box').style.display = 'none';
                renderGrid(true); 
                return;
            }

            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const secs = Math.floor((diff % (1000 * 60)) / 1000);

            text.innerHTML = `ENDS IN: ${days}d ${hours}h ${mins}m ${secs}s`;
            if (diff < (1000 * 60 * 60 * 24)) pill.classList.add('urgent');
        }

        function renderGrid(isExpired) {
            const g = document.getElementById('main-grid');
            g.innerHTML = "";
            for (let i = 1; i <= 28; i++) {
                let cardContent = "";
                
                if (isExpired && (i === 1 || i === 2)) {
                    // üõë Post-Promo State
                    cardContent = `
                        <div class="placeholder-text">New promos coming soon</div>
                        <button class="btn disabled-btn" disabled>More Info</button>
                    `;
                } else if (i === 26) {
                    // ‚è≥ Design #26 State
                    cardContent = `
                        <img src="${i}.jpg" onerror="this.src='logo.jpg'">
                        <div style="margin-top:10px; font-weight:900; text-align:center;">Design #${i}</div>
                        <button class="btn disabled-btn" disabled>Coming Soon</button>
                    `;
                } else if (i <= 2) {
                    // üî• Active Promo State
                    cardContent = `
                        <img src="${i}.jpg" onerror="this.src='logo.jpg'">
                        <div style="margin-top:10px; font-weight:900; text-align:center;">Design #${i}</div>
                        <button class="btn" style="background:#000" onclick="promoInquiry(${i})">More Info</button>
                    `;
                } else {
                    // üõí Normal Product State
                    cardContent = `
                        <img src="${i}.jpg" onerror="this.src='logo.jpg'">
                        <div style="margin-top:10px; font-weight:900; text-align:center;">Design #${i}</div>
                        <button id="btn-${i}" class="btn" onclick="add(${i})">Add to Bag</button>
                    `;
                }

                g.innerHTML += `<div class="card">${cardContent}</div>`;
            }
        }

        function add(id) { cart.push(id); updateCounter(); }
        function promoInquiry(id) { window.open(`https://wa.me/27XXXXXXXXX?text=Hi I'd like to know more about this! (Design #${id})`); }
        function updateCounter() { document.getElementById('fab-count').innerText = cart.length; }

        setInterval(updateTimer, 1000);
        renderGrid(new Date().getTime() > deadline);
        updateCounter();
    </script>
</body>
</html>
