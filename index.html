<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Otaku Beads | Easy Maintenance</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">
    <style>
        :root {
            --p: #6750A4; --on-p: #ffffff; --s: #FEF7FF; --sc: #F3EDF7; --sec-c: #E8DEF8; --on-sec-c: #1D192B; --out: #CAC4D0; --err: #B3261E;
        }
        * { -webkit-tap-highlight-color: transparent; outline: none; box-sizing: border-box; }
        body { font-family: 'Roboto', sans-serif; margin: 0; background: var(--s); color: #1C1B1F; overflow-x: hidden; }

        /* M3 TIMER & HEADER */
        .timer-container { position: sticky; top: 12px; z-index: 200; display: flex; justify-content: center; width: 100%; pointer-events: none; margin-bottom: -40px; }
        .timer-pill { background: var(--p); color: white; padding: 8px 20px; border-radius: 20px; font-size: 13px; font-weight: 900; box-shadow: 0 4px 12px rgba(0,0,0,0.15); display: flex; align-items: center; gap: 8px; pointer-events: auto; transition: 0.5s ease; }
        .urgent { background: var(--err) !important; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        .header { display: flex; align-items: center; gap: 10px; height: 64px; padding: 0 16px; background: var(--s); z-index: 100; margin-top: 50px; }
        .logo-img { height: 40px; width: 40px; border-radius: 50%; object-fit: cover; }
        .brand-name { font-weight: 900; font-size: 18px; color: var(--p); }

        /* GRID & CARDS */
        .grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; padding: 16px; padding-bottom: 120px; }
        .card { background: var(--sc); border-radius: 28px; padding: 12px; position: relative; display: flex; flex-direction: column; min-height: 200px; }
        .card img { width: 100%; border-radius: 22px; aspect-ratio: 1/1; object-fit: cover; }
        
        /* M3 BUTTONS */
        .btn { height: 40px; border-radius: 20px; border: none; font-weight: 700; background: var(--p); color: white; margin-top: 12px; width: 100%; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.2s; font-size: 14px; }
        .btn-added { background: var(--sec-c); color: var(--on-sec-c); }
        .qty-pill { background: var(--p); color: white; padding: 2px 8px; border-radius: 10px; font-size: 11px; margin-right: 6px; }
        .disabled-btn { background: #E0E0E0 !important; color: #757575 !important; cursor: not-allowed !important; opacity: 0.7; }
        .placeholder-text { flex: 1; display: flex; align-items: center; justify-content: center; text-align: center; font-weight: 700; color: var(--out); padding: 10px; font-size: 14px; }

        /* FAB & OVERLAY */
        .fab { position: fixed; bottom: 24px; right: 24px; background: var(--p); color: white; padding: 16px 24px; border-radius: 20px; border: none; display: flex; align-items: center; gap: 12px; box-shadow: 0 8px 24px rgba(0,0,0,0.3); font-weight: 900; z-index: 500; cursor: pointer; }
        .bag-view { position: fixed; top: 0; right: -100%; width: 100%; height: 100%; background: var(--s); transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1); z-index: 1000; display: flex; flex-direction: column; }
        .bag-view.active { right: 0; }
    </style>
</head>
<body>

    <div class="timer-container" id="timer-box">
        <div id="timer-pill" class="timer-pill">
            <span class="material-symbols-outlined" style="font-size:18px;">alarm</span>
            <span id="timer-text">LOADING...</span>
        </div>
    </div>

    <header class="header">
        <button style="background:none; border:none;"><span class="material-symbols-outlined">menu</span></button>
        <img src="logo.jpg" class="logo-img" alt="Logo">
        <span class="brand-name">Otaku Beads</span>
    </header>

    <button class="fab" onclick="toggleBag(true)">
        <span class="material-symbols-outlined">shopping_bag</span>
        Bag ( <span id="fab-count">0</span> )
    </button>

    <div id="bag-view" class="bag-view">
        <div class="header" style="margin-top:0; border-bottom: 1px solid var(--out);">
            <button onclick="toggleBag(false)" style="background:none; border:none;"><span class="material-symbols-outlined">arrow_back</span></button>
            <span style="font-size: 20px; font-weight: 900; flex: 1; text-align:center;">Review Bag</span>
        </div>
        <div id="list" style="flex:1; overflow-y:auto; padding:16px;"></div>
        <div style="padding:24px; border-top:1px solid var(--out);">
            <div id="bag-total-text" style="text-align: center; font-weight: 900; margin-bottom: 15px;">Items: 0</div>
            <button class="btn" style="height:60px; font-size: 16px;" onclick="whatsappOrder()">Checkout on WhatsApp</button>
        </div>
    </div>

    <main class="grid" id="main-grid"></main>

    <script>
        // ==========================================
        // âš™ï¸ PRODUCT CONFIGURATION (Edit here!)
        // ==========================================
        const PROMO_DEADLINE = "Jan 31, 2026 23:59:59";
        const WHATSAPP_NUMBER = "27XXXXXXXXX"; // Replace with your number
        
        // Generate list 1-28
        const products = Array.from({length: 28}, (_, i) => ({
            id: i + 1,
            name: `Design #${i + 1}`,
            image: `${i + 1}.jpg`,
            isPromo: (i + 1) <= 2,
            isComingSoon: (i + 1) === 26
        }));

        // ==========================================
        // ðŸ§  CORE ENGINE (No need to touch)
        // ==========================================
        let cart = JSON.parse(localStorage.getItem('otaku_cart')) || [];

        function updateTimer() {
            const diff = new Date(PROMO_DEADLINE).getTime() - new Date().getTime();
            const pill = document.getElementById('timer-pill');
            const text = document.getElementById('timer-text');
            if (diff <= 0) { document.getElementById('timer-box').style.display = 'none'; renderGrid(true); return; }
            const h = Math.floor((diff % (86400000)) / 3600000);
            const d = Math.floor(diff / 86400000);
            const m = Math.floor((diff % 3600000) / 60000);
            const s = Math.floor((diff % 60000) / 1000);
            text.innerHTML = `ENDS IN: ${d}d ${h}h ${m}m ${s}s`;
            if (diff < 86400000) pill.classList.add('urgent');
        }

        function renderGrid(isExpired) {
            const g = document.getElementById('main-grid');
            const counts = cart.reduce((a, c) => { a[c] = (a[c] || 0) + 1; return a; }, {});
            g.innerHTML = products.map(p => {
                if (isExpired && p.isPromo) return `<div class="card"><div class="placeholder-text">New promos coming soon</div><button class="btn disabled-btn" disabled>More Info</button></div>`;
                if (p.isComingSoon) return `<div class="card"><img src="${p.image}" onerror="this.src='logo.jpg'"><div style="margin-top:10px; font-weight:900; text-align:center;">${p.name}</div><button class="btn disabled-btn" disabled>Coming Soon</button></div>`;
                
                const q = counts[p.id] || 0;
                const btnLabel = p.isPromo ? "More Info" : (q > 0 ? `<span class="qty-pill">Qty: ${q}</span> Added` : "Add to Bag");
                const btnClick = p.isPromo ? `promoInquiry(${p.id})` : `add(${p.id})`;
                const btnStyle = p.isPromo ? 'style="background:#000"' : '';

                return `<div class="card">
                    ${p.isPromo ? '<div style="position:absolute; top:12px; left:12px; background:var(--err); color:white; padding:4px 10px; border-radius:12px; font-size:10px; font-weight:900; z-index:10;">PROMO</div>' : ''}
                    <img src="${p.image}" onerror="this.src='logo.jpg'">
                    <div style="margin-top:10px; font-weight:900; text-align:center;">${p.name}</div>
                    <button id="btn-${p.id}" class="btn ${q > 0 && !p.isPromo ? 'btn-added' : ''}" ${btnStyle} onclick="${btnClick}">${btnLabel}</button>
                </div>`;
            }).join('');
        }

        function add(id) { cart.push(id); updateUI(); renderGrid(new Date().getTime() > new Date(PROMO_DEADLINE).getTime()); }
        function toggleBag(show) { document.getElementById('bag-view').classList.toggle('active', show); }
        function promoInquiry(id) { window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=Hi I'd like to know more about this! (Design #${id})`); }
        function whatsappOrder() { if(cart.length) window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=Order: ${cart.join(", ")}`); }

        function updateUI() {
            localStorage.setItem('otaku_cart', JSON.stringify(cart));
            document.getElementById('fab-count').innerText = cart.length;
            document.getElementById('bag-total-text').innerText = `Total Items: ${cart.length}`;
            const counts = cart.reduce((a, c) => { a[c] = (a[c] || 0) + 1; return a; }, {});
            document.getElementById('list').innerHTML = cart.length === 0 ? '<p style="text-align:center; opacity:0.5;">Bag is empty</p>' : 
                Object.keys(counts).map(id => `<div style="display:flex; align-items:center; gap:12px; margin-bottom:12px; background:var(--sc); padding:12px; border-radius:20px;">
                    <img src="${id}.jpg" style="width:40px; height:40px; border-radius:10px; object-fit:cover;" onerror="this.src='logo.jpg'">
                    <div style="flex:1; font-weight:900;">Design #${id}</div>
                    <span>Qty: ${counts[id]}</span>
                </div>`).join('');
        }

        setInterval(updateTimer, 1000);
        renderGrid(new Date().getTime() > new Date(PROMO_DEADLINE).getTime());
        updateUI();
    </script>
</body>
</html>
